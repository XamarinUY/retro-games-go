<?xml version="1.0" encoding="UTF-8"?>
<views:MvxContentPage x:TypeArguments="viewModels:MainViewModel"
                      xmlns="http://xamarin.com/schemas/2014/forms" 
                      xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" 
                      xmlns:views="clr-namespace:MvvmCross.Forms.Views;assembly=MvvmCross.Forms"
                      xmlns:mvx="clr-namespace:MvvmCross.Forms.Bindings;assembly=MvvmCross.Forms"
                      x:Class="RetroGamesGo.Core.Pages.MainPage"
                      xmlns:viewModels="clr-namespace:RetroGamesGo.Core.ViewModels;assembly=RetroGamesGo.Core"
                      xmlns:cards="clr-namespace:PanCardView;assembly=PanCardView"
                      xmlns:controls="clr-namespace:PanCardView.Controls;assembly=PanCardView"
                      xmlns:ffimage="clr-namespace:FFImageLoading.Forms;assembly=FFImageLoading.Forms"
                      Title="Retro Games GO"
                      BackgroundColor="White">
    <views:MvxContentPage.ToolbarItems>
        <ToolbarItem Name="Capture" Order="Primary" Icon="ic_capture.png" Priority="0" Command="{Binding CaptureCommand}" />
    </views:MvxContentPage.ToolbarItems>
    <views:MvxContentPage.Resources>
        <ResourceDictionary>
            <Style x:Key="ActiveIndicator" TargetType="Frame">
                <Setter Property="BackgroundColor" Value="Black" />
            </Style>
            <Style x:Key="InactiveIndicator" TargetType="Frame">
                <Setter Property="BackgroundColor" Value="Transparent" />
                <Setter Property="OutlineColor" Value="Black" />
            </Style>
        </ResourceDictionary>
    </views:MvxContentPage.Resources>
    <views:MvxContentPage.Content>
        <cards:CarouselView IsCyclical="true"
                             SelectedIndex="{Binding CurrentIndex}"
                             ItemsSource="{Binding Characters}">
            <cards:CarouselView.ItemTemplate>
                <DataTemplate>
                    <Grid Padding="16" VerticalOptions="FillAndExpand">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="1*" />
                            <RowDefinition Height="2*" />
                            <RowDefinition Height="2*" />
                        </Grid.RowDefinitions>
                        <StackLayout Grid.Row="0" Spacing="4" VerticalOptions="Center">
                            <Label Text="{Binding Name}" IsVisible="{Binding Captured}" FontSize="Large" FontAttributes="Bold" HorizontalTextAlignment="Center" />
                            <Label Text="{Binding Number, StringFormat='#{0:0}'}" FontSize="Large" HorizontalTextAlignment="Center" />
                        </StackLayout>
                        <AbsoluteLayout Grid.Row="1" HorizontalOptions="Center" VerticalOptions="FillAndExpand">
                            <ffimage:CachedImage Source="{Binding Silhouette}" Aspect="AspectFit" AbsoluteLayout.LayoutFlags="All" AbsoluteLayout.LayoutBounds="0,0,1,1" />
                            <ffimage:CachedImage Source="{Binding Picture}" IsVisible="{Binding Captured}" Aspect="AspectFit" AbsoluteLayout.LayoutFlags="All" AbsoluteLayout.LayoutBounds="0,0,1,1" />
                        </AbsoluteLayout>
                        
                        <Label Grid.Row="2" Text="{Binding Description}" IsVisible="{Binding Captured}" FontSize="Small" HorizontalTextAlignment="Center" VerticalOptions="Center" />
                    </Grid>
                </DataTemplate>
            </cards:CarouselView.ItemTemplate>
            <controls:IndicatorsControl
                      SelectedIndicatorStyle="{StaticResource ActiveIndicator}"
                      UnselectedIndicatorStyle="{StaticResource InactiveIndicator}" />
        </cards:CarouselView>
    </views:MvxContentPage.Content>
</views:MvxContentPage>